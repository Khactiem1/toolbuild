var A=Object.defineProperty;var S=(e,o,s)=>o in e?A(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s;var d=(e,o,s)=>S(e,typeof o!="symbol"?o+"":o,s);import{I as g,J as I,d as w,g as B,r as v,e as L,_ as M,j as i,m as T,o as P,w as u,b as a,k as m,v as D,t as V}from"./index-DmUMvrSQ.js";import{c as U}from"./crudBaseStore-BQfEd0nr.js";import{B as k}from"./BaseDetail-zykIlOpR.js";import{M as N}from"./MsFileImage-Dp23ULa6.js";import{u as q}from"./remoteCombobox-B8Q4up6i.js";import{d as O}from"./dictionaryAPI-B4HeeuwR.js";import{d as R}from"./dictionaryListAPI-DusaOPoV.js";import{M as j}from"./MsFroala-BGFcGW6x.js";import"./validateComponent-kMK-YP6C.js";import"./fileAPI-_RNgakGO.js";import"./popupUtil-BIlfh91z.js";class E extends g{constructor(){super(...arguments);d(this,"apiName","dictionary");d(this,"controllerName","Anoucement")}}const $=new E,F=new U({field:{key:"anoucement_id",code:""}},$);class J{constructor(){d(this,"state",()=>({...F.state}));d(this,"actions",{...F.actions})}}const Y=new J,z=I("moduleAnoucement",Y),G=w({mixins:[],components:{MsFileImage:N,MsFroala:j},extends:k,setup(){const{proxy:e}=B(),o=z(),s=v($),f=v("anoucement"),_=L({dictionary:[],list_channel:[]}),{comboboxLoadData:y}=q(),r=t=>{const l=e;if(l.editMode==l.$ms.constant.FormState.Add){const n=["is_active","=",!0];l.$ms.commonFn.concatFilter(t,n)}};return{api:s,storeModule:o,subSystemCode:f,selectedType:t=>{const l=e;l.model.type_name=t.newData?t.newData.dictionary_name:null},filterType:t=>{const l=e;r(t);const n=["dictionary_list_code","=","LoaiThongBao"];l.$ms.commonFn.concatFilter(t,n)},filterInactive:r,afterBindData:()=>{const t=e;t.editMode==t.$ms.constant.FormState.Add&&(t.model.anoucement_id=t.$ms.commonFn.generateUUID())},comboboxLoadData:y,dataCombobox:_,dictionaryAPI:O,buildFilterComboboxChannel:t=>{t.CustomParam||(t.CustomParam={}),t.CustomParam.ViewName='"SYS".channel',t.CustomParam.columns="channel_code,channel_name"},dictionaryListAPI:R,selectedChannelList:t=>{const l=e;l.model.channel_name=t.newData?t.newData.channel_name:null}}}}),H={ref:"slot-content",class:"form-content-popup"},K={class:"form-container mt-4"},Q={class:"form-detail"},W={class:"flex form-group"},X={class:"form-item_input"},Z={class:"form-item_input"},x={class:"flex form-group"},ee={class:"form-item_input"},oe={class:"form-item_input"},ne={class:"flex form-group"},te={class:"form-detail form-group"},ae={class:"form-action"},le={class:"form-action_container"},me={class:"form-action_item"},se={class:"form-action_item"};function ie(e,o,s,f,_,y){const r=i("ms-input"),c=i("ms-combobox-v2"),p=i("ms-datepicker"),C=i("ms-textarea"),h=i("ms-froala"),b=i("ms-button"),t=i("ms-dynamic-popup");return P(),T(t,{width:1200,height:650,title:`${e.editMode?e.$ms.commonFn.getEnumResource(e.editMode,"FormState"):""} ${e.$t("i18nAnoucement.Title")}`,onBeforeOpen:e.beforeOpen},{content:u(({close:l})=>[a("div",H,[a("div",K,[a("div",Q,[a("div",W,[a("div",X,[m(r,{maxLength:250,rules:[{name:"required"}],label:e.$t("i18nAnoucement.Detail.anoucement_name"),modelValue:e.model.anoucement_name,"onUpdate:modelValue":o[0]||(o[0]=n=>e.model.anoucement_name=n)},null,8,["label","modelValue"])]),a("div",Z,[m(c,{label:e.$t("i18nAnoucement.Detail.type"),valueField:"dictionary_value",displayField:"dictionary_name",data:e.dataCombobox.dictionary,initText:e.model.type_name,onComboboxLoadData:o[1]||(o[1]=n=>e.comboboxLoadData(n,e.dictionaryAPI,e.dataCombobox,"dictionary")),onSelected:e.selectedType,buildFilter:e.filterType,rules:[{name:"required"},{name:"forceSelection"}],queryMode:"remote",remoteFilter:!0,modelValue:e.model.type,"onUpdate:modelValue":o[2]||(o[2]=n=>e.model.type=n),display:e.model.type_name,"onUpdate:display":o[3]||(o[3]=n=>e.model.type_name=n)},null,8,["label","data","initText","onSelected","buildFilter","modelValue","display"])])]),a("div",x,[a("div",ee,[m(c,{label:e.$t("i18nAnoucement.Detail.channel_code"),valueField:"channel_code",displayField:"channel_name",data:e.dataCombobox.list_channel,buildFilter:e.buildFilterComboboxChannel,initText:e.model.channel_name,onComboboxLoadData:o[4]||(o[4]=n=>e.comboboxLoadData(n,e.dictionaryListAPI,e.dataCombobox,"list_channel",null)),onSelected:e.selectedChannelList,rules:[{name:"forceSelection"}],queryMode:"remote",remoteFilter:!0,modelValue:e.model.channel_code,"onUpdate:modelValue":o[5]||(o[5]=n=>e.model.channel_code=n),display:e.model.channel_name,"onUpdate:display":o[6]||(o[6]=n=>e.model.channel_name=n)},null,8,["label","data","buildFilter","initText","onSelected","modelValue","display"])]),a("div",oe,[m(p,{label:e.$t("i18nAnoucement.Detail.date_publish"),maxDate:new Date,modelValue:e.model.date_publish,"onUpdate:modelValue":o[7]||(o[7]=n=>e.model.date_publish=n)},null,8,["label","maxDate","modelValue"]),m(p,{class:"pl-3",label:e.$t("i18nAnoucement.Detail.date_push"),maxDate:new Date,modelValue:e.model.date_push,"onUpdate:modelValue":o[8]||(o[8]=n=>e.model.date_push=n)},null,8,["label","maxDate","modelValue"])])]),a("div",ne,[m(C,{maxLength:250,rules:[],label:e.$t("i18nAnoucement.Detail.description"),modelValue:e.model.description,"onUpdate:modelValue":o[9]||(o[9]=n=>e.model.description=n)},null,8,["label","modelValue"])]),a("div",te,[m(h,{label:e.$t("i18nAnoucement.Detail.content"),modelValue:e.model.content,"onUpdate:modelValue":o[10]||(o[10]=n=>e.model.content=n),pathMedia:`/anoucement/content/${e.model.anoucement_id}`},null,8,["label","modelValue","pathMedia"])])])])],512)]),footer:u(({close:l})=>[a("div",ae,[a("div",le,[a("div",me,[m(b,{onClick:l},{default:u(()=>[D(V(e.$t("i18nCommon.Close")),1)]),_:2},1032,["onClick"])]),a("div",se,[m(b,{onClick:e.save,class:"primary"},{default:u(()=>[D(V(e.$t("i18nCommon.crud.save")),1)]),_:1},8,["onClick"])])])])]),_:1},8,["title","onBeforeOpen"])}const De=M(G,[["render",ie],["__scopeId","data-v-4b760536"]]);export{De as default};
