var I=Object.defineProperty;var w=(e,o,i)=>o in e?I(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i;var d=(e,o,i)=>w(e,typeof o!="symbol"?o+"":o,i);import{I as y,J as g,d as U,g as A,r as _,e as k,_ as B,j as r,m as L,o as P,w as c,b as n,k as l,v as V,t as $}from"./index-whgfsyUy.js";import{c as S}from"./crudBaseStore-afhvnkno.js";import{v as N}from"./voucherEventAPI-CV0ASp4O.js";import{B as O}from"./BaseDetail-2bx4aSjb.js";import{u as E}from"./remoteCombobox-B8Q4up6i.js";import"./validateComponent-B7XtBPe1.js";class M extends y{constructor(){super(...arguments);d(this,"apiName","dictionary");d(this,"controllerName","Voucher")}}const D=new M,C=new S({field:{key:"voucher_id",code:"voucher_code"}},D);class T{constructor(){d(this,"state",()=>({...C.state}));d(this,"actions",{...C.actions})}}const q=new T,R=g("moduleVoucher",q);class j extends y{constructor(){super(...arguments);d(this,"apiName","dictionary");d(this,"controllerName","Customer")}}const J=new j,W=U({mixins:[],extends:O,setup(){const{proxy:e}=A(),o=R(),i=_(D),v=_("customer_voucher"),{comboboxLoadData:b}=E(),f=k({voucherEvent:[],customer:[]});return{api:i,storeModule:o,subSystemCode:v,dataCombobox:f,voucherEventAPI:N,customerAPI:J,comboboxLoadData:b,filterInactive:s=>{const a=e;if(a.editMode==a.$ms.constant.FormState.Add){const u=["is_active","=",!0];a.$ms.commonFn.concatFilter(s,u)}},selectedUserList:s=>{const a=e;a.model.customer_name=s.newData?s.newData.customer_name:null,a.model.phone=s.newData?s.newData.phone:null}}}}),z={ref:"slot-content",class:"form-content-popup"},G={class:"form-container mt-4"},H={class:"form-item_input"},K={class:"form-group"},Q={class:"form-group"},X={class:"form-item_input"},Y={class:"form-group"},Z={class:"form-item_input"},x={class:"form-group"},ee={class:"form-group"},oe={class:"form-item_input"},te={class:"form-group"},ne={class:"form-action"},le={class:"form-action_container"},se={class:"form-action_item"},ae={class:"form-action_item"};function ie(e,o,i,v,b,f){const m=r("ms-input"),p=r("ms-combobox-v2"),s=r("ms-number"),a=r("ms-datepicker"),u=r("ms-button"),F=r("ms-dynamic-popup");return P(),L(F,{width:800,height:550,title:`${e.editMode?e.$ms.commonFn.getEnumResource(e.editMode,"FormState"):""} ${e.$t("i18nVoucher.Title")}`,onBeforeOpen:e.beforeOpen},{content:c(({close:h})=>[n("div",z,[n("div",G,[n("div",H,[n("div",K,[l(m,{maxLength:100,rules:[{name:"required"}],label:e.$t("i18nVoucher.Detail.voucher_name"),modelValue:e.model.voucher_name,"onUpdate:modelValue":o[0]||(o[0]=t=>e.model.voucher_name=t)},null,8,["label","modelValue"])]),n("div",Q,[l(m,{maxLength:30,rules:[{name:"required"}],label:e.$t("i18nVoucher.Detail.voucher_code"),modelValue:e.model.voucher_code,"onUpdate:modelValue":o[1]||(o[1]=t=>e.model.voucher_code=t)},null,8,["label","modelValue"])])]),n("div",X,[n("div",Y,[l(p,{label:e.$t("i18nVoucher.Detail.customer_name"),valueField:"customer_id",displayField:"customer_name",data:e.dataCombobox.customer,initText:e.model.customer_name,onComboboxLoadData:o[2]||(o[2]=t=>e.comboboxLoadData(t,e.customerAPI,e.dataCombobox,"customer")),onSelected:e.selectedUserList,buildFilter:e.filterInactive,queryMode:"remote",remoteFilter:!0,modelValue:e.model.customer_id,"onUpdate:modelValue":o[3]||(o[3]=t=>e.model.customer_id=t),display:e.model.customer_name,"onUpdate:display":o[4]||(o[4]=t=>e.model.customer_name=t),dropdownWidth:730,columns:[{title:e.$t("i18nVoucher.Detail.customer_name"),dataField:"customer_name",width:200,filterOperator:e.$ms.constant.FilterOperator.Contains},{title:e.$t("i18nVoucher.Detail.phone"),dataField:"phone",width:150,filterOperator:e.$ms.constant.FilterOperator.Contains}]},null,8,["label","data","initText","onSelected","buildFilter","modelValue","display","columns"])])]),n("div",Z,[n("div",x,[l(p,{label:e.$t("i18nVoucher.Detail.voucher_event_name"),valueField:"voucher_event_id",displayField:"voucher_event_name",data:e.dataCombobox.voucherEvent,initText:e.model.voucher_event_name,onComboboxLoadData:o[5]||(o[5]=t=>e.comboboxLoadData(t,e.voucherEventAPI,e.dataCombobox,"voucherEvent")),buildFilter:e.filterInactive,queryMode:"remote",remoteFilter:!0,modelValue:e.model.voucher_event_id,"onUpdate:modelValue":o[6]||(o[6]=t=>e.model.voucher_event_id=t),display:e.model.voucher_event_name,"onUpdate:display":o[7]||(o[7]=t=>e.model.voucher_event_name=t)},null,8,["label","data","initText","buildFilter","modelValue","display"]),l(s,{class:"mt-3",max:100,label:e.$t("i18nVoucher.Detail.discount_percent"),infoCustom:"%",modelValue:e.model.discount_percent,"onUpdate:modelValue":o[8]||(o[8]=t=>e.model.discount_percent=t)},null,8,["label","modelValue"])]),n("div",ee,[l(a,{label:e.$t("i18nVoucher.Detail.expire_date"),modelValue:e.model.expire_date,"onUpdate:modelValue":o[9]||(o[9]=t=>e.model.expire_date=t)},null,8,["label","modelValue"]),l(s,{class:"mt-3",label:e.$t("i18nVoucher.Detail.discount_value"),infoCustom:"Ä‘",modelValue:e.model.discount_value,"onUpdate:modelValue":o[10]||(o[10]=t=>e.model.discount_value=t)},null,8,["label","modelValue"])])]),n("div",oe,[n("div",te,[l(m,{label:e.$t("i18nVoucher.Detail.description"),modelValue:e.model.description,"onUpdate:modelValue":o[11]||(o[11]=t=>e.model.description=t)},null,8,["label","modelValue"])])])])],512)]),footer:c(({close:h})=>[n("div",ne,[n("div",le,[n("div",se,[l(u,{onClick:h},{default:c(()=>[V($(e.$t("i18nCommon.Close")),1)]),_:2},1032,["onClick"])]),n("div",ae,[l(u,{onClick:e.save,class:"primary"},{default:c(()=>[V($(e.$t("i18nCommon.crud.save")),1)]),_:1},8,["onClick"])])])])]),_:1},8,["title","onBeforeOpen"])}const be=B(W,[["render",ie],["__scopeId","data-v-3fa44954"]]);export{be as default};
