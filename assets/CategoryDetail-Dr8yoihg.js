var B=Object.defineProperty;var S=(e,o,i)=>o in e?B(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i;var _=(e,o,i)=>S(e,typeof o!="symbol"?o+"":o,i);import{J as F,d as k,g as P,r as $,e as w,_ as M,j as l,m as I,o as U,w as u,b as t,k as m,v as D,t as f}from"./index-whgfsyUy.js";import{c as q}from"./crudBaseStore-afhvnkno.js";import{c as g}from"./categoryAPI-B2Oh2XQB.js";import{B as V}from"./BaseDetail-2bx4aSjb.js";import{M as R}from"./MsFileImage-CUdc8Ebt.js";import{M as T}from"./MsComboboxTreeV2-Dc_yCRuJ.js";import"./validateComponent-B7XtBPe1.js";import"./fileAPI-D2rdd4Hc.js";const h=new q({field:{key:"category_id",code:""}},g);class N{constructor(){_(this,"state",()=>({...h.state}));_(this,"actions",{...h.actions})}}const O=new N,A=F("moduleCategory",O),E=k({mixins:[],components:{MsFileImage:R,MsComboboxTreeV2:T},extends:V,setup(){const{proxy:e}=P(),o=A(),i=$(g),y=$("category"),d=w({category:[]}),b=async()=>{var r,p;const a=e,c={PageIndex:0,PageSize:0,Columns:"*",Filter:"",Sort:"",CustomParam:{}};a.$ms.commonFn.mask();const s=await g.getList(c);a.$ms.commonFn.unmask(),s!=null&&s.Success&&((p=(r=s==null?void 0:s.Data)==null?void 0:r.PageData)!=null&&p.length)&&(a.editMode==a.$ms.constant.FormState.Add?d.category=s.Data.PageData:d.category=a.$ms.commonFn.deleteHierarchyTree(s.Data.PageData,"parent_id","category_id",a._formParam.dataRow.category_id))};return{api:i,storeModule:o,subSystemCode:y,comboBoxDataRemote:d,beforeBindData:async()=>{const a=e;await b(),await a.super("beforeBindData",V)}}}}),L={ref:"slot-content",class:"form-content-popup"},j={class:"form-container mt-4"},z={class:"form-detail flex-center"},H={class:"form-item"},J={class:"form-item_input"},G={class:"form-group ms-big"},K={class:"form-item_input"},Q={class:"form-group"},W={class:"form-item_input"},X={class:"form-group"},Y={class:"form-group"},Z={class:"select-image"},x={class:"select-title"},ee={class:"form-action"},oe={class:"form-action_container"},te={class:"form-action_item"},ae={class:"form-action_item"};function se(e,o,i,y,d,b){const v=l("ms-input"),a=l("ms-combobox-tree-v2"),c=l("ms-number"),s=l("ms-file-image"),r=l("ms-button"),p=l("ms-dynamic-popup");return U(),I(p,{width:800,height:600,title:`${e.editMode?e.$ms.commonFn.getEnumResource(e.editMode,"FormState"):""} ${e.$t("i18nCategory.Title")}`,onBeforeOpen:e.beforeOpen},{content:u(({close:C})=>[t("div",L,[t("div",j,[t("div",z,[t("div",H,[t("div",J,[t("div",G,[m(v,{maxLength:100,rules:[{name:"required"}],label:e.$t("i18nCategory.Detail.category_name"),modelValue:e.model.category_name,"onUpdate:modelValue":o[0]||(o[0]=n=>e.model.category_name=n)},null,8,["label","modelValue"])])]),t("div",K,[t("div",Q,[m(a,{label:e.$t("i18nCategory.Detail.parent"),data:e.comboBoxDataRemote.category,displayField:"category_name",valueField:"category_id",idProperty:"category_id",modelValue:e.model.parent_id,"onUpdate:modelValue":o[1]||(o[1]=n=>e.model.parent_id=n)},null,8,["label","data","modelValue"])])]),t("div",W,[t("div",X,[m(c,{disabled:e.editMode==e.$ms.constant.FormState.Edit,label:e.$t("i18nCategory.Detail.quantity"),modelValue:e.model.quantity,"onUpdate:modelValue":o[2]||(o[2]=n=>e.model.quantity=n)},null,8,["disabled","label","modelValue"])]),t("div",Y,[m(c,{label:e.$t("i18nCategory.Detail.sort"),modelValue:e.model.sort,"onUpdate:modelValue":o[3]||(o[3]=n=>e.model.sort=n)},null,8,["label","modelValue"])])]),t("div",Z,[t("label",x,f(e.$t("i18nCategory.Detail.icon")),1),m(s,{modelValue:e.model.icon,"onUpdate:modelValue":o[4]||(o[4]=n=>e.model.icon=n),path:"/category/icon"},null,8,["modelValue"])])])])])],512)]),footer:u(({close:C})=>[t("div",ee,[t("div",oe,[t("div",te,[m(r,{onClick:C},{default:u(()=>[D(f(e.$t("i18nCommon.Close")),1)]),_:2},1032,["onClick"])]),t("div",ae,[m(r,{onClick:e.save,class:"primary"},{default:u(()=>[D(f(e.$t("i18nCommon.crud.save")),1)]),_:1},8,["onClick"])])])])]),_:1},8,["title","onBeforeOpen"])}const _e=M(E,[["render",se],["__scopeId","data-v-ef0b729b"]]);export{_e as default};
