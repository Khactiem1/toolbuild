import{B as y,L as C,M as b}from"./BaseList-D2cGamHg.js";import{f as k}from"./fileAPI-_RNgakGO.js";import{u as D}from"./moduleUser-dL7j-6_8.js";import{d as T,g as U,r as F,e as I,D as $,G as V,_ as B,j as r,m as M,o as v,w as n,b as o,k as d,v as g,t as w,a as P,p as N}from"./index-DmUMvrSQ.js";import"./MsGridFilter-BUyLjtCk.js";import"./vuedraggable.umd-DLvMjPJ4.js";import"./resizeColumn-xtUupxba.js";import"./crudBaseStore-BQfEd0nr.js";import"./popupUtil-BIlfh91z.js";import"./layoutAPI-SPx1ej8s.js";const L=T({components:{MsGridViewer:b,ListConditionFilter:C},extends:y,setup(){const{proxy:e}=U(),l=D(),f=F(V),p=()=>{var a,i;const t=e;if(((a=t.gridInfo.selected)==null?void 0:a.length)>5){$(t.$t("i18nReceiveNotify.ValidateSelectUser"));return}typeof((i=t._formParam)==null?void 0:i.selectedUser)=="function"&&t._formParam.selectedUser(t.gridInfo.selected),c()},u=t=>{var i;const a=e;a._popup=a.$vfm.dynamicModals[a.$vfm.dynamicModals.length-1],a._formParam=t.ref.params._rawValue?t.ref.params._rawValue:t.ref.params,(i=a._formParam)!=null&&i.receiver_ids&&a._formParam.receiver_ids.split(";").forEach(s=>{s&&a.gridInfo.selected.push({user_id:s})})},_=I([{lock:!0,width:"150",header:"i18nUser.Detail.user_name",dataField:"user_name",formatType:12,headerCustom:"",visible:!0},{lock:!0,width:"120",header:"i18nUser.Detail.user_code",dataField:"user_code",formatType:12,headerCustom:"",visible:!0},{lock:!1,width:"",header:"i18nUser.Detail.user_full_name",dataField:"user_full_name",formatType:12,headerCustom:"Họ tên",visible:!0},{lock:!1,width:"150",header:"i18nUser.Detail.manager",dataField:"manager_name",formatType:12,headerCustom:"",visible:!0},{lock:!1,width:180,header:"i18nUser.Detail.department_name",dataField:"department_name",formatType:12,headerCustom:"",visible:!0},{lock:!1,width:180,header:"i18nUser.Detail.position_name",dataField:"position_name",formatType:12,headerCustom:"",visible:!0},{lock:!1,width:"130",header:"i18nUser.Detail.date_joining",dataField:"date_joining",formatType:14,headerCustom:"",visible:!0},{lock:!1,width:"120",header:"i18nUser.Detail.date_of_birth",dataField:"date_of_birth",formatType:14,headerCustom:"",visible:!0},{lock:!1,width:"120",header:"i18nUser.Detail.gender",dataField:"gender",formatType:100,enum:"Gender",headerCustom:"",visible:!0},{lock:!1,width:"120",header:"i18nUser.Detail.phone_number",dataField:"phone_number",formatType:12,headerCustom:"Điện thoại",visible:!0},{lock:!1,width:"170",header:"i18nUser.Detail.email",dataField:"email",formatType:12,headerCustom:"Email",visible:!0},{lock:!1,width:"200",header:"i18nUser.Detail.address",dataField:"address",formatType:12,headerCustom:"",visible:!1}]),c=()=>{try{const t=e;t._popup.value=!1,t.$nextTick(()=>{delete t._popup})}catch(t){console.error(t)}};return{api:f,columns:_,fileAPI:k,storeModule:l,save:p,beforeOpen:u}}}),R={ref:"slot-content",class:"form-content-popup"},S={class:"form-container"},A={class:"table-function sticky"},E={class:"form-fix"},O={class:"action-left flex"},j={style:{width:"200px"}},G={class:"image-table"},H=["src"],q={class:"form-action"},z={class:"form-action_container"},J={class:"form-action_item"},K={class:"form-action_item"};function Q(e,l,f,p,u,_){const c=r("ms-input"),t=r("list-condition-filter"),a=r("ms-grid-viewer"),i=r("ms-button"),h=r("ms-dynamic-popup");return v(),M(h,{width:1100,height:800,title:e.$t("i18nReceiveNotify.Detail.receiver_ids"),onBeforeOpen:e.beforeOpen},{content:n(({close:s})=>[o("div",R,[o("div",S,[o("div",A,[o("div",E,[o("div",O,[o("div",j,[d(c,{onInput:e.debounceSearch,modelValue:e.searchText,"onUpdate:modelValue":l[0]||(l[0]=m=>e.searchText=m),placeholder:e.$t("i18nCommon.search")},null,8,["onInput","modelValue","placeholder"])])]),d(t,{grid:e.$refs[e.viewRef],onLoadData:e.loadData},null,8,["grid","onLoadData"])])]),d(a,{ref:e.viewRef,columns:e.columns,data:e.storeModule.items,pageTotal:e.storeModule.total,loading:e.storeModule.loading,idField:"user_id",gridInfo:e.gridInfo,loadData:e.loadData,showAction:!1},{avartar:n(({record:m})=>[o("div",G,[m.avartar?(v(),P("img",{key:0,src:e.fileAPI.getFileViewUrl(m.avartar)},null,8,H)):N("",!0)])]),_:1},8,["columns","data","pageTotal","loading","gridInfo","loadData"])])],512)]),footer:n(({close:s})=>[o("div",q,[o("div",z,[o("div",J,[d(i,{onClick:s},{default:n(()=>[g(w(e.$t("i18nCommon.Close")),1)]),_:2},1032,["onClick"])]),o("div",K,[d(i,{onClick:e.save,class:"primary"},{default:n(()=>[g(w(e.$t("i18nCommon.crud.chose")),1)]),_:1},8,["onClick"])])])])]),_:1},8,["title","onBeforeOpen"])}const se=B(L,[["render",Q],["__scopeId","data-v-8dfa452d"]]);export{se as default};
