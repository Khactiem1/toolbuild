var k=Object.defineProperty;var P=(e,o,i)=>o in e?k(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i;var r=(e,o,i)=>P(e,typeof o!="symbol"?o+"":o,i);import{I as S,J as A,d as I,g as N,r as b,e as h,_ as U,j as d,m as L,o as v,w as _,b as n,k as l,v as $,t as g,a as D,p as C}from"./index-whgfsyUy.js";import{c as R}from"./crudBaseStore-afhvnkno.js";import{B as w}from"./BaseDetail-2bx4aSjb.js";import{M as O}from"./MsComboboxTreeV2-Dc_yCRuJ.js";import{M as T}from"./MsFileImage-CUdc8Ebt.js";import"./validateComponent-B7XtBPe1.js";import"./fileAPI-D2rdd4Hc.js";class q extends S{constructor(){super(...arguments);r(this,"apiName","dictionary");r(this,"controllerName","MenuFontend")}}const y=new q,B=new R({field:{key:"menu_id",code:"menu_code"}},y);class E{constructor(){r(this,"state",()=>({...B.state}));r(this,"actions",{...B.actions})}}const J=new E,j=A("moduleMenuFontend",J),z=I({mixins:[],components:{MsComboboxTreeV2:O,MsFileImage:T},extends:w,setup(){const{proxy:e}=N(),o=j(),i=b(y),M=b("menu_frontend"),c=h({menu_code:[]}),F=h({web:"web",app:"app",shop:"shop"}),m=b(null),f=async()=>{var u,t;const a=e,p={PageIndex:0,PageSize:0,Columns:"*",Filter:JSON.stringify(["menu_type","=",m.value]),Sort:"sort ASC",CustomParam:{}};a.$ms.commonFn.mask();const s=await y.getList(p);a.$ms.commonFn.unmask(),s!=null&&s.Success&&((t=(u=s==null?void 0:s.Data)==null?void 0:u.PageData)!=null&&t.length)&&(a.editMode==a.$ms.constant.FormState.Add?c.menu_code=s.Data.PageData:c.menu_code=a.$ms.commonFn.deleteHierarchyTree(s.Data.PageData,"parent_id","menu_id",a._formParam.dataRow.menu_id))};return{api:i,storeModule:o,subSystemCode:M,comboBoxDataRemote:c,typeActive:m,typeMenu:F,beforeBindData:async()=>{const a=e;m.value=a._formParam.dataRow.menu_type,await f(),await a.super("beforeBindData",w)}}}}),H={ref:"slot-content",class:"form-content-popup"},G={class:"form-container mt-4"},K={class:"form-detail flex-center"},Q={class:"form-item"},W={class:"form-item_input"},X={class:"form-group ms-small"},Y={class:"form-group ms-big"},Z={class:"form-item_input"},x={key:0,class:"form-group ms-small"},ee={class:"form-group ms-big"},oe={class:"form-item_input"},ne={class:"form-group"},te={class:"form-item_input"},ae={class:"form-group flex"},se={key:0,class:"select-image flex flex-center flex1"},le={class:"select-title"},me={class:"form-action"},ie={class:"form-action_container"},de={class:"form-action_item"},ue={class:"form-action_item"};function re(e,o,i,M,c,F){const m=d("ms-input"),f=d("ms-combobox-tree-v2"),V=d("ms-number"),a=d("ms-file-image"),p=d("ms-button"),s=d("ms-dynamic-popup");return v(),L(s,{width:800,height:586,title:`${e.editMode?e.$ms.commonFn.getEnumResource(e.editMode,"FormState"):""} ${e.$t("i18nMenuFontend.Title")}`,onBeforeOpen:e.beforeOpen},{content:_(({close:u})=>[n("div",H,[n("div",G,[n("div",K,[n("div",Q,[n("div",W,[n("div",X,[l(m,{maxLength:30,rules:[{name:"required"}],label:e.$t("i18nMenuFontend.Detail.menu_code"),modelValue:e.model.menu_code,"onUpdate:modelValue":o[0]||(o[0]=t=>e.model.menu_code=t)},null,8,["label","modelValue"])]),n("div",Y,[l(m,{maxLength:150,rules:[{name:"required"}],label:e.$t("i18nMenuFontend.Detail.menu_name"),modelValue:e.model.menu_name,"onUpdate:modelValue":o[1]||(o[1]=t=>e.model.menu_name=t)},null,8,["label","modelValue"])])]),n("div",Z,[e.typeActive==e.typeMenu.web||e.typeActive==e.typeMenu.shop?(v(),D("div",x,[l(m,{maxLength:50,label:e.$t("i18nMenuFontend.Detail.icon"),modelValue:e.model.icon,"onUpdate:modelValue":o[2]||(o[2]=t=>e.model.icon=t)},null,8,["label","modelValue"])])):C("",!0),n("div",ee,[l(m,{maxLength:150,label:e.$t("i18nMenuFontend.Detail.url"),modelValue:e.model.url,"onUpdate:modelValue":o[3]||(o[3]=t=>e.model.url=t)},null,8,["label","modelValue"])])]),n("div",oe,[n("div",ne,[l(f,{label:e.$t("i18nMenuFontend.Detail.parent"),data:e.comboBoxDataRemote.menu_code,displayField:"menu_name",valueField:"menu_id",idProperty:"menu_id",modelValue:e.model.parent_id,"onUpdate:modelValue":o[4]||(o[4]=t=>e.model.parent_id=t),columns:[{title:e.$t("i18nMenu.Detail.menu_code"),dataField:"menu_code",width:300},{title:e.$t("i18nMenu.Detail.menu_name"),dataField:"menu_name",width:null}]},null,8,["label","data","modelValue","columns"])])]),n("div",te,[n("div",ae,[l(V,{style:{"margin-right":"6px"},class:"ms-small",label:e.$t("i18nMenuFontend.Detail.sort"),modelValue:e.model.sort,"onUpdate:modelValue":o[5]||(o[5]=t=>e.model.sort=t)},null,8,["label","modelValue"]),e.typeActive==e.typeMenu.app?(v(),D("div",se,[n("div",null,[n("label",le,g(e.$t("i18nMenuFontend.Detail.icon")),1),l(a,{modelValue:e.model.icon,"onUpdate:modelValue":o[6]||(o[6]=t=>e.model.icon=t),path:"/menu/icon"},null,8,["modelValue"])])])):C("",!0)])])])])])],512)]),footer:_(({close:u})=>[n("div",me,[n("div",ie,[n("div",de,[l(p,{onClick:u},{default:_(()=>[$(g(e.$t("i18nCommon.Close")),1)]),_:2},1032,["onClick"])]),n("div",ue,[l(p,{onClick:e.save,class:"primary"},{default:_(()=>[$(g(e.$t("i18nCommon.crud.save")),1)]),_:1},8,["onClick"])])])])]),_:1},8,["title","onBeforeOpen"])}const Me=U(z,[["render",re],["__scopeId","data-v-39629c32"]]);export{Me as default};
