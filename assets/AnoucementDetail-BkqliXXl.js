var A=Object.defineProperty;var S=(e,o,s)=>o in e?A(e,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[o]=s;var m=(e,o,s)=>S(e,typeof o!="symbol"?o+"":o,s);import{I as g,J as I,d as w,g as B,r as h,e as L,_ as T,j as i,m as P,o as k,w as r,b as a,k as l,v as D,t as F}from"./index-whgfsyUy.js";import{c as U}from"./crudBaseStore-afhvnkno.js";import{B as M}from"./BaseDetail-2bx4aSjb.js";import{M as N}from"./MsFileImage-CUdc8Ebt.js";import{u as q}from"./remoteCombobox-B8Q4up6i.js";import{d as O}from"./dictionaryAPI-CC-qEnNc.js";import{d as R}from"./dictionaryListAPI-D_3bu0SF.js";import"./validateComponent-B7XtBPe1.js";import"./fileAPI-D2rdd4Hc.js";class j extends g{constructor(){super(...arguments);m(this,"apiName","dictionary");m(this,"controllerName","Anoucement")}}const $=new j,V=new U({field:{key:"anoucement_id",code:""}},$);class E{constructor(){m(this,"state",()=>({...V.state}));m(this,"actions",{...V.actions})}}const J=new E,Y=I("moduleAnoucement",J),z=w({mixins:[],components:{MsFileImage:N},extends:M,setup(){const{proxy:e}=B(),o=Y(),s=h($),f=h("anoucement"),_=L({dictionary:[],list_channel:[]}),{comboboxLoadData:y}=q(),d=t=>{const n=e;if(n.editMode==n.$ms.constant.FormState.Add){const b=["is_active","=",!0];n.$ms.commonFn.concatFilter(t,b)}};return{api:s,storeModule:o,subSystemCode:f,selectedType:t=>{const n=e;n.model.type_name=t.newData?t.newData.dictionary_name:null},filterType:t=>{const n=e;d(t);const b=["dictionary_list_code","=","LoaiThongBao"];n.$ms.commonFn.concatFilter(t,b)},filterInactive:d,afterBindData:()=>{const t=e;t.editMode==t.$ms.constant.FormState.Add&&(t.model.anoucement_id=t.$ms.commonFn.generateUUID())},comboboxLoadData:y,dataCombobox:_,dictionaryAPI:O,buildFilterComboboxChannel:t=>{t.CustomParam||(t.CustomParam={}),t.CustomParam.ViewName='"SYS".channel',t.CustomParam.columns="channel_code,channel_name"},dictionaryListAPI:R,selectedChannelList:t=>{const n=e;n.model.channel_name=t.newData?t.newData.channel_name:null}}}}),G={ref:"slot-content",class:"form-content-popup"},H={class:"form-container mt-4"},K={class:"form-detail"},Q={class:"flex form-group"},W={class:"form-item_input"},X={class:"form-item_input"},Z={class:"flex form-group"},x={class:"form-item_input"},ee={class:"form-item_input"},oe={class:"flex form-group"},ne={class:"form-action"},te={class:"form-action_container"},ae={class:"form-action_item"},le={class:"form-action_item"};function se(e,o,s,f,_,y){const d=i("ms-input"),c=i("ms-combobox-v2"),u=i("ms-datepicker"),C=i("ms-textarea"),p=i("ms-button"),v=i("ms-dynamic-popup");return k(),P(v,{width:1200,height:650,title:`${e.editMode?e.$ms.commonFn.getEnumResource(e.editMode,"FormState"):""} ${e.$t("i18nAnoucement.Title")}`,onBeforeOpen:e.beforeOpen},{content:r(({close:t})=>[a("div",G,[a("div",H,[a("div",K,[a("div",Q,[a("div",W,[l(d,{maxLength:250,rules:[{name:"required"}],label:e.$t("i18nAnoucement.Detail.anoucement_name"),modelValue:e.model.anoucement_name,"onUpdate:modelValue":o[0]||(o[0]=n=>e.model.anoucement_name=n)},null,8,["label","modelValue"])]),a("div",X,[l(c,{label:e.$t("i18nAnoucement.Detail.type"),valueField:"dictionary_value",displayField:"dictionary_name",data:e.dataCombobox.dictionary,initText:e.model.type_name,onComboboxLoadData:o[1]||(o[1]=n=>e.comboboxLoadData(n,e.dictionaryAPI,e.dataCombobox,"dictionary")),onSelected:e.selectedType,buildFilter:e.filterType,rules:[{name:"required"},{name:"forceSelection"}],queryMode:"remote",remoteFilter:!0,modelValue:e.model.type,"onUpdate:modelValue":o[2]||(o[2]=n=>e.model.type=n),display:e.model.type_name,"onUpdate:display":o[3]||(o[3]=n=>e.model.type_name=n)},null,8,["label","data","initText","onSelected","buildFilter","modelValue","display"])])]),a("div",Z,[a("div",x,[l(c,{label:e.$t("i18nAnoucement.Detail.channel_code"),valueField:"channel_code",displayField:"channel_name",data:e.dataCombobox.list_channel,buildFilter:e.buildFilterComboboxChannel,initText:e.model.channel_name,onComboboxLoadData:o[4]||(o[4]=n=>e.comboboxLoadData(n,e.dictionaryListAPI,e.dataCombobox,"list_channel",null)),onSelected:e.selectedChannelList,rules:[{name:"forceSelection"}],queryMode:"remote",remoteFilter:!0,modelValue:e.model.channel_code,"onUpdate:modelValue":o[5]||(o[5]=n=>e.model.channel_code=n),display:e.model.channel_name,"onUpdate:display":o[6]||(o[6]=n=>e.model.channel_name=n)},null,8,["label","data","buildFilter","initText","onSelected","modelValue","display"])]),a("div",ee,[l(u,{label:e.$t("i18nAnoucement.Detail.date_publish"),maxDate:new Date,modelValue:e.model.date_publish,"onUpdate:modelValue":o[7]||(o[7]=n=>e.model.date_publish=n)},null,8,["label","maxDate","modelValue"]),l(u,{class:"pl-3",label:e.$t("i18nAnoucement.Detail.date_push"),maxDate:new Date,modelValue:e.model.date_push,"onUpdate:modelValue":o[8]||(o[8]=n=>e.model.date_push=n)},null,8,["label","maxDate","modelValue"])])]),a("div",oe,[l(C,{maxLength:250,rules:[],label:e.$t("i18nAnoucement.Detail.description"),modelValue:e.model.description,"onUpdate:modelValue":o[9]||(o[9]=n=>e.model.description=n)},null,8,["label","modelValue"])]),o[10]||(o[10]=a("div",{class:"form-detail form-group"},null,-1))])])],512)]),footer:r(({close:t})=>[a("div",ne,[a("div",te,[a("div",ae,[l(p,{onClick:t},{default:r(()=>[D(F(e.$t("i18nCommon.Close")),1)]),_:2},1032,["onClick"])]),a("div",le,[l(p,{onClick:e.save,class:"primary"},{default:r(()=>[D(F(e.$t("i18nCommon.crud.save")),1)]),_:1},8,["onClick"])])])])]),_:1},8,["title","onBeforeOpen"])}const ye=T(z,[["render",se],["__scopeId","data-v-d7b9cd93"]]);export{ye as default};
