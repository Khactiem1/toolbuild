var w=Object.defineProperty;var k=(t,o,n)=>o in t?w(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n;var a=(t,o,n)=>k(t,typeof o!="symbol"?o+"":o,n);import{I as P,J as F,d as N,g as x,r as i,_ as I,j as S,m as b,o as c,w as g,b as s,k as z,v as M,t as m,a as h,F as T,l as V,n as A,p as O}from"./index-whgfsyUy.js";import{c as J}from"./crudBaseStore-afhvnkno.js";import{B as L}from"./BaseDetail-2bx4aSjb.js";import"./validateComponent-B7XtBPe1.js";class j extends P{constructor(){super(...arguments);a(this,"apiName","dictionary");a(this,"controllerName","Chats")}}const C=new j,$=new J({field:{key:"message_id",code:""}},C);class E{constructor(){a(this,"state",()=>({...$.state}));a(this,"actions",{...$.actions})}}const H=new E,U=F("moduleChats",H),Y=N({mixins:[],extends:L,setup(){const{proxy:t}=x(),o=U(),n=i(C),v=i("customer_message"),d=i([]),l=i(null),_=async()=>{const e=t,f={PageIndex:0,PageSize:0,Columns:"*",Filter:JSON.stringify(["chats_id","=",e.model.message_id]),Sort:"sent_at ASC",CustomParam:{ViewName:'"CUST".cust_view_get_messages'}};e.$ms.commonFn.mask();const r=await C.getList(f);e.$ms.commonFn.unmask(),d.value=r.Data.PageData,l.value=r.Data.PageData[0].sender_id};function u(e){const f=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),B=e.getFullYear(),y=String(e.getHours()).padStart(2,"0"),D=String(e.getMinutes()).padStart(2,"0");return`${f}/${r}/${B} ${y}:${D}`}return{api:n,storeModule:o,subSystemCode:v,dataChats:d,first_person:l,afterBindData:()=>{_()},getFormattedDateTime:u}}}),q={ref:"slot-content",class:"form-content-popup"},G={class:"form-container mt-4"},K={class:"form-detail"},Q={class:"form-item_input"},R={class:"form-group"},W={class:"info-sent flex gap-6"},X={class:"customer-name"},Z={key:0,width:"16",height:"16",fill:"green",viewBox:"0 0 24 24"},tt={class:"content-sent"},et={class:"form-action"},st={class:"form-action_container"},ot={class:"form-action_item"};function nt(t,o,n,v,d,l){const _=S("ms-button"),u=S("ms-dynamic-popup");return c(),b(u,{width:500,height:600,title:`${t.$t("i18nChats.Title")}`,onBeforeOpen:t.beforeOpen},{content:g(({close:p})=>[s("div",q,[s("div",G,[s("div",K,[s("div",Q,[s("div",R,[(c(!0),h(T,null,V(t.dataChats,e=>(c(),h("div",{class:A(`flex ${t.first_person==e.sender_id?"":"right"}`)},[s("div",null,[s("div",W,[s("p",X,m(e.customer_name),1),s("p",null,m(t.getFormattedDateTime(e.sent_at)),1),e.seen?(c(),h("svg",Z,o[0]||(o[0]=[s("path",{d:"M12 4C7 4 2.7 7 1 12c1.7 5 6 8 11 8s9.3-3 11-8c-1.7-5-6-8-11-8zm0 14c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6zm0-10c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"},null,-1)]))):O("",!0)]),s("p",tt,m(e.content),1)])],2))),256))])])])])],512)]),footer:g(({close:p})=>[s("div",et,[s("div",st,[s("div",ot,[z(_,{onClick:p},{default:g(()=>[M(m(t.$t("i18nCommon.Close")),1)]),_:2},1032,["onClick"])])])])]),_:1},8,["title","onBeforeOpen"])}const dt=I(Y,[["render",nt],["__scopeId","data-v-a8ffda55"]]);export{dt as default};
