import{u as A}from"./moduleSupplier-DzjKo3cL.js";import{s as B}from"./supplierAPI-DalYHo4f.js";import{B as P}from"./BaseDetail-zykIlOpR.js";import{M as N}from"./MsFileImage-Dp23ULa6.js";import{u as R}from"./remoteCombobox-B8Q4up6i.js";import{d as U}from"./dictionaryAPI-B4HeeuwR.js";import{g as M,r as $,d as W,e as q,_ as O,j as b,m as h,o as F,w as y,b as a,k as i,v as C,t as _,p as L}from"./index-DmUMvrSQ.js";import{d as Q}from"./districtAPI-ubtrwWMP.js";import{p as j}from"./provinceAPI-BfessMms.js";import{w as J}from"./wardAPI-7iG5pEMM.js";import"./crudBaseStore-BQfEd0nr.js";import"./validateComponent-kMK-YP6C.js";import"./fileAPI-_RNgakGO.js";const z=()=>{const{proxy:e}=M(),o=$({TuChoi:{supplier_status:"TuChoi",supplier_status_name:""},LuuTam:{supplier_status:"LuuTam",supplier_status_name:""},ChoDuyet:{supplier_status:"ChoDuyet",supplier_status_name:""},DaDuyet:{supplier_status:"DaDuyet",supplier_status_name:""}});return{supplier_status:o,loadMappingSupplierStatus:async()=>{var m,g;const c=e,D={PageIndex:0,PageSize:0,Columns:"*",Filter:"",Sort:"",CustomParam:{}};c.editMode==c.$ms.constant.FormState.Add?D.Filter=JSON.stringify([["is_active","=",!0],"and",["dictionary_list_code","=","TrangThaiDuyet"]]):D.Filter=JSON.stringify(["dictionary_list_code","=","TrangThaiDuyet"]),c.$ms.commonFn.mask();const d=await U.getList(D);if(c.$ms.commonFn.unmask(),d!=null&&d.Success&&((g=(m=d==null?void 0:d.Data)==null?void 0:m.PageData)!=null&&g.length)){const f=d.Data.PageData.find(u=>u.dictionary_value==o.value.TuChoi.supplier_status),S=d.Data.PageData.find(u=>u.dictionary_value==o.value.LuuTam.supplier_status),v=d.Data.PageData.find(u=>u.dictionary_value==o.value.ChoDuyet.supplier_status),n=d.Data.PageData.find(u=>u.dictionary_value==o.value.DaDuyet.supplier_status);f&&(o.value.TuChoi.supplier_status_name=f.dictionary_name),S&&(o.value.LuuTam.supplier_status_name=S.dictionary_name),v&&(o.value.ChoDuyet.supplier_status_name=v.dictionary_name),n&&(o.value.DaDuyet.supplier_status_name=n.dictionary_name)}}}},E=W({mixins:[],components:{MsFileImage:N},extends:P,setup(){const{proxy:e}=M(),o=A(),T=$(B),c=$("supplier_info"),D=$(!1),d={width:Math.round(window.innerWidth*.8),height:Math.round(window.innerHeight*.8)},{comboboxLoadData:m}=R(),g=q({dictionary:[],district:[],province:[],ward:[]}),{supplier_status:f,loadMappingSupplierStatus:S}=z(),v=async()=>{const s=e;await S(),s.editMode==s.$ms.constant.FormState.Add&&(s._formParam.dataRow.approval_status=f.value.LuuTam.supplier_status,s._formParam.dataRow.approval_status_name=f.value.LuuTam.supplier_status_name),await s.super("beforeBindData",P)},n=s=>{const l=e;if(l.editMode==l.$ms.constant.FormState.Add){const r=["is_active","=",!0];l.$ms.commonFn.concatFilter(s,r)}},u=s=>{var l,r,p;(l=e.$refs)!=null&&l.district_code&&typeof((p=(r=e.$refs)==null?void 0:r.district_code)==null?void 0:p.doRemoteQuery)=="function"&&e.$refs.district_code.doRemoteQuery("")},w=s=>{var l,r,p;(l=e.$refs)!=null&&l.ward_code&&typeof((p=(r=e.$refs)==null?void 0:r.ward_code)==null?void 0:p.doRemoteQuery)=="function"&&e.$refs.ward_code.doRemoteQuery("")},t=s=>{var p;const l=e;n(s);const r=["province_code","=",(p=l.model)!=null&&p.province_code?l.model.province_code:""];l.$ms.commonFn.concatFilter(s,r)},I=s=>{var p;const l=e;n(s);const r=["district_code","=",(p=l.model)!=null&&p.district_code?l.model.district_code:""];l.$ms.commonFn.concatFilter(s,r)},k=s=>{const l=e;n(s);const r=["dictionary_list_code","=","LoaiNhaCungCap"];l.$ms.commonFn.concatFilter(s,r)},V=$(null);return{api:T,stylePopup:d,hideAfterSave:D,supplier_status:f,storeModule:o,subSystemCode:c,dictionaryAPI:U,dataCombobox:g,districtAPI:Q,provinceAPI:j,wardAPI:J,beforeSave:async s=>{V.value&&(s.approval_status=V.value.supplier_status,s.approval_status_name=V.value.supplier_status_name,s.is_update_approval_status=!0,V.value=null)},saveWithStatus:s=>{const l=e;V.value=s,l.save()},filterNewType:k,comboboxLoadData:m,filterInactive:n,beforeBindData:v,afterSaveSuccess:async s=>{const l=e;s!=null&&s.Data&&(l.model.approval_status=s.Data.approval_status,l.model.approval_status_name=s.Data.approval_status_name,l.model.is_update_approval_status=!1)},filterWardByDistrict:I,filterDistrictByProvince:t,selectedDistrict:w,selectedProvince:u}}}),H={ref:"slot-content",class:"form-content-popup"},G={class:"form-container pd-t-4"},K={class:"form-detail flex"},X={class:"form-item"},Y={class:"form-item_input"},Z={class:"form-group"},x={class:"form-group"},ee={class:"form-group"},oe={class:"form-group"},te={class:"form-item"},ae={class:"form-item_input flex"},se={class:"meta-content",style:{flex:"1"}},le={class:"form-group"},ie={class:"form-group",style:{"padding-left":"0"}},de={class:"form-group",style:{"padding-left":"0"}},ne={style:{"margin-left":"20px"},class:"select-image"},re={class:"select-title"},me={class:"form-item"},ue={class:"form-item_input flex"},pe={class:"meta-content",style:{flex:"1"}},fe={class:"form-group"},ve={class:"form-group",style:{"padding-left":"0"}},ce={class:"form-group",style:{"padding-left":"0"}},be={style:{"margin-left":"20px"},class:"select-image"},ye={class:"select-title"},_e={class:"form-item"},De={class:"form-item_input flex"},ge={class:"meta-content",style:{flex:"1"}},Se={class:"form-group",style:{"padding-left":"0"}},Ve={class:"form-group",style:{"padding-left":"0"}},Ce={class:"form-group",style:{"padding-left":"0"}},$e={class:"form-action"},we={class:"form-action_container"},he={class:"form-action_item"},Fe={class:"form-action_item"};function Te(e,o,T,c,D,d){const m=b("ms-input"),g=b("ms-textarea"),f=b("ms-file-image"),S=b("ms-number"),v=b("ms-combobox-v2"),n=b("ms-button"),u=b("ms-dynamic-popup");return F(),h(u,{width:e.stylePopup.width,height:e.stylePopup.height,title:`${e.editMode?e.$ms.commonFn.getEnumResource(e.editMode,"FormState"):""} ${e.$t("i18nSupplier.Title")}`,onBeforeOpen:e.beforeOpen},{content:y(({close:w})=>[a("div",H,[a("div",G,[a("div",K,[a("div",X,[a("div",Y,[a("div",Z,[i(m,{maxLength:100,rules:[{name:"required"}],label:e.$t("i18nSupplier.Detail.supplier_name"),modelValue:e.model.supplier_name,"onUpdate:modelValue":o[0]||(o[0]=t=>e.model.supplier_name=t)},null,8,["label","modelValue"])])]),a("div",x,[i(m,{maxLength:50,label:e.$t("i18nSupplier.Detail.phone"),modelValue:e.model.phone,"onUpdate:modelValue":o[1]||(o[1]=t=>e.model.phone=t),rules:[{name:"required"},{name:"pattern",compareValue:"phone"}]},null,8,["label","modelValue"])]),a("div",ee,[i(m,{maxLength:50,label:e.$t("i18nSupplier.Detail.email"),modelValue:e.model.email,"onUpdate:modelValue":o[2]||(o[2]=t=>e.model.email=t),rules:[{name:"pattern",compareValue:"email"}]},null,8,["label","modelValue"])]),a("div",oe,[i(g,{maxLength:250,label:e.$t("i18nSupplier.Detail.address"),modelValue:e.model.address,"onUpdate:modelValue":o[3]||(o[3]=t=>e.model.address=t)},null,8,["label","modelValue"])])]),a("div",te,[a("div",ae,[a("div",se,[a("div",le,[i(m,{maxLength:100,label:e.$t("i18nSupplier.Detail.representative"),modelValue:e.model.representative,"onUpdate:modelValue":o[4]||(o[4]=t=>e.model.representative=t)},null,8,["label","modelValue"])]),a("div",ie,[i(m,{maxLength:15,label:e.$t("i18nSupplier.Detail.brn"),modelValue:e.model.brn,"onUpdate:modelValue":o[5]||(o[5]=t=>e.model.brn=t)},null,8,["label","modelValue"])]),a("div",de,[i(m,{maxLength:15,label:e.$t("i18nSupplier.Detail.tax_id"),modelValue:e.model.tax_id,"onUpdate:modelValue":o[6]||(o[6]=t=>e.model.tax_id=t)},null,8,["label","modelValue"])]),a("div",ne,[a("label",re,_(e.$t("i18nSupplier.Detail.logo")),1),i(f,{modelValue:e.model.logo,"onUpdate:modelValue":o[7]||(o[7]=t=>e.model.logo=t),path:"/supplier/logo"},null,8,["modelValue"])])])])]),a("div",me,[a("div",ue,[a("div",pe,[a("div",fe,[i(m,{label:e.$t("i18nSupplier.Detail.website"),modelValue:e.model.website,"onUpdate:modelValue":o[8]||(o[8]=t=>e.model.website=t)},null,8,["label","modelValue"])]),a("div",ve,[i(S,{infoCustom:"Ä‘",disabled:!0,label:e.$t("i18nSupplier.Detail.balance"),modelValue:e.model.balance,"onUpdate:modelValue":o[9]||(o[9]=t=>e.model.balance=t)},null,8,["label","modelValue"])]),a("div",ce,[i(v,{label:e.$t("i18nSupplier.Detail.supplier_type"),valueField:"dictionary_value",displayField:"dictionary_name",data:e.dataCombobox.dictionary,initText:e.model.supplier_type_name,onComboboxLoadData:o[10]||(o[10]=t=>e.comboboxLoadData(t,e.dictionaryAPI,e.dataCombobox,"dictionary")),buildFilter:e.filterNewType,queryMode:"remote",remoteFilter:!0,modelValue:e.model.supplier_type,"onUpdate:modelValue":o[11]||(o[11]=t=>e.model.supplier_type=t),display:e.model.supplier_type_name,"onUpdate:display":o[12]||(o[12]=t=>e.model.supplier_type_name=t)},null,8,["label","data","initText","buildFilter","modelValue","display"])]),a("div",be,[a("label",ye,_(e.$t("i18nSupplier.Detail.brn_image")),1),i(f,{modelValue:e.model.brn_image,"onUpdate:modelValue":o[13]||(o[13]=t=>e.model.brn_image=t),path:"/supplier/brn_image"},null,8,["modelValue"])])])])]),a("div",_e,[a("div",De,[a("div",ge,[a("div",Se,[i(v,{label:e.$t("i18nSupplier.Detail.province_name"),valueField:"province_code",displayField:"province_name",data:e.dataCombobox.province,initText:e.model.province_name,onComboboxLoadData:o[14]||(o[14]=t=>e.comboboxLoadData(t,e.provinceAPI,e.dataCombobox,"province")),buildFilter:e.filterInactive,queryMode:"remote",remoteFilter:!0,onSelected:e.selectedProvince,modelValue:e.model.province_code,"onUpdate:modelValue":o[15]||(o[15]=t=>e.model.province_code=t),display:e.model.province_name,"onUpdate:display":o[16]||(o[16]=t=>e.model.province_name=t)},null,8,["label","data","initText","buildFilter","onSelected","modelValue","display"])]),a("div",Ve,[i(v,{label:e.$t("i18nSupplier.Detail.district_name"),ref:"district_code",valueField:"district_code",displayField:"district_name",data:e.dataCombobox.district,initText:e.model.district_name,onComboboxLoadData:o[17]||(o[17]=t=>e.comboboxLoadData(t,e.districtAPI,e.dataCombobox,"district")),buildFilter:e.filterDistrictByProvince,queryMode:"remote",remoteFilter:!0,onSelected:e.selectedDistrict,modelValue:e.model.district_code,"onUpdate:modelValue":o[18]||(o[18]=t=>e.model.district_code=t),display:e.model.district_name,"onUpdate:display":o[19]||(o[19]=t=>e.model.district_name=t)},null,8,["label","data","initText","buildFilter","onSelected","modelValue","display"])]),a("div",Ce,[i(v,{label:e.$t("i18nSupplier.Detail.ward_name"),valueField:"ward_code",displayField:"ward_name",ref:"ward_code",data:e.dataCombobox.ward,initText:e.model.ward_name,onComboboxLoadData:o[20]||(o[20]=t=>e.comboboxLoadData(t,e.wardAPI,e.dataCombobox,"ward")),buildFilter:e.filterWardByDistrict,queryMode:"remote",remoteFilter:!0,modelValue:e.model.ward_code,"onUpdate:modelValue":o[21]||(o[21]=t=>e.model.ward_code=t),display:e.model.ward_name,"onUpdate:display":o[22]||(o[22]=t=>e.model.ward_name=t)},null,8,["label","data","initText","buildFilter","modelValue","display"])])])])])])])],512)]),footer:y(({close:w})=>[a("div",$e,[a("div",we,[a("div",he,[i(n,{onClick:w},{default:y(()=>[C(_(e.$t("i18nCommon.Close")),1)]),_:2},1032,["onClick"])]),a("div",Fe,[i(n,{onClick:e.save,class:"mr-2"},{default:y(()=>[C(_(e.$t("i18nCommon.crud.save")),1)]),_:1},8,["onClick"]),e.model.approval_status==e.supplier_status.LuuTam.supplier_status||e.model.approval_status==e.supplier_status.TuChoi.supplier_status?(F(),h(n,{key:0,onClick:o[23]||(o[23]=t=>e.saveWithStatus(e.supplier_status.ChoDuyet)),class:"primary"},{default:y(()=>[C(_(e.$t("i18nSupplier.Detail.sendApproval")),1)]),_:1})):L("",!0),e.model.approval_status==e.supplier_status.ChoDuyet.supplier_status?(F(),h(n,{key:1,onClick:o[24]||(o[24]=t=>e.saveWithStatus(e.supplier_status.TuChoi)),class:"danger mr-2"},{default:y(()=>[C(_(e.$t("i18nSupplier.Detail.reject")),1)]),_:1})):L("",!0),e.model.approval_status==e.supplier_status.ChoDuyet.supplier_status?(F(),h(n,{key:2,onClick:o[25]||(o[25]=t=>e.saveWithStatus(e.supplier_status.DaDuyet)),class:"primary"},{default:y(()=>[C(_(e.$t("i18nSupplier.Detail.approved")),1)]),_:1})):L("",!0)])])])]),_:1},8,["width","height","title","onBeforeOpen"])}const ze=O(E,[["render",Te],["__scopeId","data-v-885c53ed"]]);export{ze as default};
