var F=Object.defineProperty;var S=(e,o,i)=>o in e?F(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i;var f=(e,o,i)=>S(e,typeof o!="symbol"?o+"":o,i);import{J as P,d as A,g as U,r as b,e as $,_ as I,j as d,m as L,o as v,w as c,b as n,k as l,v as h,t as g,a as C,p as w}from"./index-DmUMvrSQ.js";import{c as N}from"./crudBaseStore-BQfEd0nr.js";import{m as y}from"./menuAPI-BtcgQow3.js";import{B}from"./BaseDetail-zykIlOpR.js";import{M as R}from"./MsComboboxTreeV2-Dc0tERHG.js";import{M as O}from"./MsFileImage-Dp23ULa6.js";import"./validateComponent-kMK-YP6C.js";import"./fileAPI-_RNgakGO.js";const k=new N({field:{key:"menu_id",code:"menu_code"}},y);class T{constructor(){f(this,"state",()=>({...k.state}));f(this,"actions",{...k.actions})}}const q=new T,E=P("moduleMenu",q),J=A({mixins:[],components:{MsComboboxTreeV2:R,MsFileImage:O},extends:B,setup(){const{proxy:e}=U(),o=E(),i=b(y),M=b("menu"),r=$({menu_code:[]}),V=$({web:"web",app:"app",supplier:"supplier"}),m=b(null),_=async()=>{var u,t;const a=e,p={PageIndex:0,PageSize:0,Columns:"*",Filter:JSON.stringify(["menu_type","=",m.value]),Sort:"sort ASC",CustomParam:{}};a.$ms.commonFn.mask();const s=await y.getList(p);a.$ms.commonFn.unmask(),s!=null&&s.Success&&((t=(u=s==null?void 0:s.Data)==null?void 0:u.PageData)!=null&&t.length)&&(a.editMode==a.$ms.constant.FormState.Add?r.menu_code=s.Data.PageData:r.menu_code=a.$ms.commonFn.deleteHierarchyTree(s.Data.PageData,"parent_id","menu_id",a._formParam.dataRow.menu_id))};return{api:i,storeModule:o,subSystemCode:M,comboBoxDataRemote:r,typeActive:m,typeMenu:V,beforeBindData:async()=>{const a=e;m.value=a._formParam.dataRow.menu_type,await _(),await a.super("beforeBindData",B)}}}}),j={ref:"slot-content",class:"form-content-popup"},z={class:"form-container mt-4"},H={class:"form-detail flex-center"},G={class:"form-item"},K={class:"form-item_input"},Q={class:"form-group ms-small"},W={class:"form-group ms-big"},X={class:"form-item_input"},Y={key:0,class:"form-group ms-small"},Z={class:"form-group ms-big"},x={class:"form-item_input"},ee={class:"form-group"},oe={class:"form-item_input"},ne={class:"form-group flex"},te={key:0,class:"select-image flex flex-center flex1"},ae={class:"select-title"},se={class:"form-action"},le={class:"form-action_container"},me={class:"form-action_item"},ie={class:"form-action_item"};function de(e,o,i,M,r,V){const m=d("ms-input"),_=d("ms-combobox-tree-v2"),D=d("ms-number"),a=d("ms-file-image"),p=d("ms-button"),s=d("ms-dynamic-popup");return v(),L(s,{width:800,height:586,title:`${e.editMode?e.$ms.commonFn.getEnumResource(e.editMode,"FormState"):""} ${e.$t("i18nMenu.Title")}`,onBeforeOpen:e.beforeOpen},{content:c(({close:u})=>[n("div",j,[n("div",z,[n("div",H,[n("div",G,[n("div",K,[n("div",Q,[l(m,{maxLength:30,rules:[{name:"required"}],label:e.$t("i18nMenu.Detail.menu_code"),modelValue:e.model.menu_code,"onUpdate:modelValue":o[0]||(o[0]=t=>e.model.menu_code=t)},null,8,["label","modelValue"])]),n("div",W,[l(m,{maxLength:150,rules:[{name:"required"}],label:e.$t("i18nMenu.Detail.menu_name"),modelValue:e.model.menu_name,"onUpdate:modelValue":o[1]||(o[1]=t=>e.model.menu_name=t)},null,8,["label","modelValue"])])]),n("div",X,[e.typeActive==e.typeMenu.web||e.typeActive==e.typeMenu.supplier?(v(),C("div",Y,[l(m,{maxLength:50,label:e.$t("i18nMenu.Detail.icon"),modelValue:e.model.icon,"onUpdate:modelValue":o[2]||(o[2]=t=>e.model.icon=t)},null,8,["label","modelValue"])])):w("",!0),n("div",Z,[l(m,{maxLength:150,label:e.$t("i18nMenu.Detail.url"),modelValue:e.model.url,"onUpdate:modelValue":o[3]||(o[3]=t=>e.model.url=t)},null,8,["label","modelValue"])])]),n("div",x,[n("div",ee,[l(_,{label:e.$t("i18nMenu.Detail.parent"),data:e.comboBoxDataRemote.menu_code,displayField:"menu_name",valueField:"menu_id",idProperty:"menu_id",modelValue:e.model.parent_id,"onUpdate:modelValue":o[4]||(o[4]=t=>e.model.parent_id=t),columns:[{title:e.$t("i18nMenu.Detail.menu_code"),dataField:"menu_code",width:300},{title:e.$t("i18nMenu.Detail.menu_name"),dataField:"menu_name",width:null}]},null,8,["label","data","modelValue","columns"])])]),n("div",oe,[n("div",ne,[l(D,{style:{"margin-right":"6px"},class:"ms-small",label:e.$t("i18nMenu.Detail.sort"),modelValue:e.model.sort,"onUpdate:modelValue":o[5]||(o[5]=t=>e.model.sort=t)},null,8,["label","modelValue"]),e.typeActive==e.typeMenu.app?(v(),C("div",te,[n("div",null,[n("label",ae,g(e.$t("i18nMenu.Detail.icon")),1),l(a,{modelValue:e.model.icon,"onUpdate:modelValue":o[6]||(o[6]=t=>e.model.icon=t),path:"/menu/icon"},null,8,["modelValue"])])])):w("",!0)])])])])])],512)]),footer:c(({close:u})=>[n("div",se,[n("div",le,[n("div",me,[l(p,{onClick:u},{default:c(()=>[h(g(e.$t("i18nCommon.Close")),1)]),_:2},1032,["onClick"])]),n("div",ie,[l(p,{onClick:e.save,class:"primary"},{default:c(()=>[h(g(e.$t("i18nCommon.crud.save")),1)]),_:1},8,["onClick"])])])])]),_:1},8,["title","onBeforeOpen"])}const ye=I(J,[["render",de],["__scopeId","data-v-d161c046"]]);export{ye as default};
